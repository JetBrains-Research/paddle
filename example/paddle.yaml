descriptor:
  name: example
  version: 0.1.0

subprojects:
  - subproject
  - dependency

roots:
  sources: src/main
  tests: src/test

# https://github.com/pyenv/pyenv/wiki#suggested-build-environment
environment:
  path: .venv
  python: 3.9

# By default, any custom repository will have precedence over PyPI (secondary == False)
repositories:
  - name: grazie-ml
    url: https://packages.jetbrains.team/pypi/p/grazi/grazie-ml/simple
    default: False # If True, this would disable the global PyPI repo, and make <ml> the default fallback source
    auth:
      type: netrc
      username: Oleg.Smirnov

#  - name: pypi-test
#    url: https://test.pypi.org/simple
#    default: False
#    auth:
#      type: profile
#      username: oesmirnov

#  - name: paper-analyzer
#    url: https://repo.labs.intellij.net/artifactory/api/pypi/paper-analyzer/simple/
#    secondary: True # Thus, <grazie-ml> still would be the primary source. But without such flag, this repo would have precedence over <ml>

requirements:
  - name: redis
    version: <=3.5.3
    # option: cpu

  - name: grazie-supar
    version: ~=1.2.1

plugins:
  enabled:
    - python
    - docker
    - ssh
#    - example-test
#  jars:
#    - ".../paddle/example/plugins/test-plugin-0.1.0.jar"

tasks:
  run:
    - id: main
      entrypoint: src/main/main.py
    - id: main_as_module
      entrypoint: src.main.main
  pytest:
    - id: tests_main_suite
      targets:
        - src/test/test_sample.py

#publish:
#  repo: pypi-test

#executor:
#  type: docker
#  image: python:3.9-slim

#executor:
#  type: ssh
#  user: admin
#  host: localhost
#  directory: /home/project/
